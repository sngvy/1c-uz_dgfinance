&НаСервере
Функция СписокВТЗ()
    // Получаем СКД с текстом запроса
    СКД_запрос = Элементы.СписокДО.ПолучитьИсполняемуюСхемуКомпоновкиДанных();

    // Получаем настройки пользователя (отборы, сортировки и т.п.)
    Настройки = Элементы.СписокДО.ПолучитьИсполняемыеНастройкиКомпоновкиДанных();

    // Переводим динамический список в таблицу значений
    КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных();
    МакетКомпоновки = КомпоновщикМакета.Выполнить(СКД_запрос, Настройки, , ,Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений"));

    ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных;
    ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки);

    ПроцессорВыводаРезультата = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений;
    ТЗ = ПроцессорВыводаРезультата.Вывести(ПроцессорКомпоновкиДанных);// Таблица значений

    Возврат ТЗ;
КонецФункции

&НаСервере
Процедура ПолучитьКоличествоСтрокВДинамическомСпискеНаСервере()
    ТЗ_ДС = СписокВТЗ();
    КолСтрокДС = ТЗ_ДС.Количество();
    ЭтаФорма.КоличествоВРаботе = КолСтрокДС;
КонецПроцедуры

&НаКлиенте
Процедура КоличествоВРаботе(Команда)
	ПолучитьКоличествоСтрокВДинамическомСпискеНаСервере();
	ПоказатьОповещениеПользователя("Договоров в работе",,КоличествоВРаботе,БиблиотекаКартинок.Информация32);
КонецПроцедуры
