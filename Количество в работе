&НаСервере
Процедура КоличествоВРаботеНаСервере()
    // Посчитать количество договоров в работе в реалтайме
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("П", ПараметрыСеанса.ТекущийПользователь);
	Запрос.Текст = 
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ДолговыеОбязательства.Ссылка КАК Ссылка
	|ИЗ
	|	Справочник.ДолговыеОбязательства КАК ДолговыеОбязательства
	|ГДЕ
	|   ДолговыеОбязательства.ДополнительныеРеквизиты.Значение = &П
	|";
	ЭтаФорма.КоличествоВРаботе = Запрос.Выполнить().Выбрать().Количество();
КонецПроцедуры

&НаКлиенте
Процедура КоличествоВРаботе(Команда)
	КоличествоВРаботеНаСервере();
	ПоказатьОповещениеПользователя("Договоров в работе: "+КоличествоВРаботе);
КонецПроцедуры
