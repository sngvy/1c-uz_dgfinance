&НаКлиенте
Процедура ЗавершитьРазговор(Команда)
	Попытка
		ФормаНабора = ПолучитьФорму("Обработка.бит_Битфон.Форма.ОсновнаяФорма");
		Если ФормаНабора.ИдетРазговор = Истина Тогда
			ФормаНабора.СостояниеЗвонка = "СброшенОператором";
			ФормаНабора.КнОтбой(Неопределено);
		КонецЕсли;
	Исключение
		Предупреждение("БИТ.Phone не подключен!");
	КонецПопытки
КонецПроцедуры

Для обработки оповещений:
Если ИмяСобытия = "ДлительностьОбновлена" Тогда 
		ФормаНабора = ПолучитьФорму("Обработка.бит_Битфон.Форма.ОсновнаяФорма");
		// Вывести длительность разговора
		ЭтаФорма.ДлительностьРазговора = ФормаНабора.ДлительностьРазговора;
		ЭтаФорма.Элементы.ДлительностьРазговора.Видимость = Истина;
	КонецЕсли;

Для АТС:
	// Обработчик состояния звонка
	Если Состояние = "ЗвонокПрерван" Тогда
		ЭтаФорма.СостояниеЗвонка = "СброшенНаАТС";
		ЭтаФорма.КнОтбой(Неопределено);
	КонецЕсли;
	
	Если Состояние = "ЗвонокПрерван" И ЭтаФорма.СостояниеЗвонка = "СброшенОператором" Тогда
		ЭтаФорма.КнОтбой(Неопределено);
	КонецЕсли;
	
	Если Состояние = "ЗвонокПрерван" Тогда
		Оповестить("ДлительностьОбновлена");
	КонецЕсли;
	
	ОбновитьСтатусАбонентаSIP(Неопределено);
	
			// Обработчик состояния звонка
			Если ЭтаФорма.СостояниеЗвонка = "СброшенНаАТС" ИЛИ ЭтаФорма.СостояниеЗвонка = "СброшенОператором" Тогда
				ЭтаФорма.КнОтключить(Неопределено);
				ЭтаФорма.СостояниеЗвонка = "";
			КонецЕсли;
